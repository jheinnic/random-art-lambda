let { registerFont, createCanvas } = require('canvas');
let findFiles = require('./find-files');
var assert = require('assert');

let dejaVuSansPath = undefined;
let dejaVuSansBoldPath = undefined;

var matches = findFiles('/usr/share/fonts', 'DejaVuSans.ttf');
if (matches.length > 0) {
    dejaVuSansPath = matches[0];
}
matches = findFiles('/usr/share/fonts', 'DejaVuSans-Bold.ttf');
if (matches.length > 0) {
    dejaVuSansBoldPath = matches[0];
}

describe('Font', function() {
  describe('#registerFont', function() {
    it('should register defined Font by name', function() {
      registerFont(dejaVuSansPath, { family: 'DejaVu Sans' });
    });
  }),
  describe('#fillText', function() {
    it('should write defined Text in canvas', function() {
      registerFont(dejaVuSansBoldPath, { family: 'DejaVu Sans Bold' });
      let canvas = createCanvas(300, 300);
      let ctx1 = canvas.getContext('2d');
      ctx1.font = '30px';
      ctx1.fillText('Default', 5, 15);
      let ctx2 = canvas.getContext('2d');
      ctx2.font = '30px "DejaVu Sans"';
      ctx2.fillText('DejaVu Sans', 5, 45);
      let ctx3 = canvas.getContext('2d');
      ctx3.font = '30px "DejaVu Sans Bold"';
      ctx3.fillText('DejaVu Sans Bold', 5, 75);
      assert.strictEqual(canvas.toDataURL(), 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAABmJLR0QA/wD/AP+gvaeTAAAZFElEQVR4nO3debgdZX3A8W8WkpAAEjZBZBMpiLKIgAQRFRAQsaCCUkFQ0bpAKxQXbNW6S6FqK0VLRUUUFRVcwBUFWYsUcAugrLIvYc0CCUnu7R+/Gc/cOe/MmbPdm8D38zznycmc2c7cM++8y+99X5AkSZIkSZIkSZIkSVqpTAVGgJuBPwFXA8cCkxts+z7gRuDkHo67JnB99n5V4Mge9iHpKWYq8Hjh/5sBVwAfarDtX4DVezxuMcFaB/hjj/uR9BRSTrAAdgDuKPz/IOBK4Brg68B04HPAEuB84JBsvV8QObS5wJuyZVsBFxb2dTxwDGMTrM8BC7J9fbTfLyTpySuVYE0FngBmETmuC4EZ2WcfBY7O3t9T2m7t7N+ZROK2Bs0SLHNYksaY2sM2o8BLgE2Ac7NlM4GLEutOAo4C9iUSwA2BzWlPDCWpo24SrO2A+4DHiMr3nwPv7LDN3sAc4GVEUfFnRNFxIWMr8KcBi7s4F0lPQU1a/SByRV8ATs3+/2vgAOBZ2f9nZ+uUzQZuIRKrpwO7ZsvvBp5JJJiTiQStbGG2jSQB9Tms6URYwwjwKPAN4PPZZ7cQuavvA6sAS4F3Z+sX/Qg4AvgOkQBdnS1fBPw3cAFwV/YqWwz8ELgh2897mn8tSZIkSZIkSZIkSZIkSVIXnkd0FxoFPj7B5yJpiDpFuq9JKzEov5YA84hg0fOBfwMOJAJOn0xOpr8EcSYReDsKLCP6U0603YAvAr8FHiKCg+8HrgV+BZwA7EN0dJdWGnUJVtVrHpF4rTZO5zjsHNYOhf3fRvPuTLnDCtv/ZLCn1rW1iF4DTf+WS4jRNaQVwqQOn68JPJy9XwB8svT5bGIYmG2B7YluOrmbgdfT6o4zLOvQGpn0cuCSIRzjd0Tnb4C9iFxIU78E9szevw747gDPqxsziOvz/Oz/o9n/ryGGBFoKbED8HecQI75C/I0fGdczlXpUzGGVx7kqW4sYHjkv/owSxYxUp+iVzTG0vtMZXWy3MbA82+4BJra4fDyt73An8MKadWcCryVG5Hja8E9NGoxuEqzcs4ncVb7dlXTOya3o1iWKR6NEJ+6mQ0B/kNZ16GWM+0H6Q+FcXjHB5yINRS8JFkTxKb/BR4FXdlh/NSIXcz4x9MwTRGXw/xH1UuvVbNukDmtVYD+iovlS4PbsGA8TFc//AfxNh3M8u3Cct3RYFyKRvrGwzQ6Fz95TWP7SDvt5R2Hd/Rsct8rj2T6WAlP62E9uENd0X1rf7Zhs2abE8Ng3ZOf8CFHMf1uD855KjA5yHpGLXEyM33YHUTVxKpFztDHhSarXBAvg9MK259Sstzdwb2Hd1Gs+0QKZ0iTBWtRh/3kL3rE15/mqwrqp0VXLXlxY/3elzyYiwcofICMMppg3iGtaTrAOYGyVQvl1HmPrSYvWJXLzTRoT9u3+62pF0MsQyU19jXjaAexOtK6NlNbZn0jMVsk++wmRy7qHKHbtQVTcrw58j0jcLujhXGYSieL5xDjxdxE/3A2I3OBB2TqfzY797cQ+fprtY30iMdqc9vG/io4ovP9qD+c8aDcCzyVyfkfQGtusV4O4pkU7A5/O3p9O5K6XADsRk5dMJ3Lq7wU+ldj+f7J1IaamOxO4lUgA1wC2JBKqnbv6llqp9JPDmkUUP/Ltn136/BlEsW+UKEbsXrGf3YgWyjysoPyEbZLD2o/6cITNgJuyfdxOdUJ+YuFYdTP5zCJyhXlowLqlzycih1WsdF9KJKK7Up1j6WQQ17SYwxolBoYs/04AXkTrt3Rf4pyfTqtx4yLqGze2YMWIhdMQ9JNgQdQj5NvPKX12UuGzquJe7ujCuoeUPhtUHNZ+hf3sVbHO1oV1bqW6MeGNhfXOTnw+EQnWdGKmonLxaBEx5PW/AwcTOchB6XRNiwnWCLBjzb6+UVi3nEuaU/jsHf2dslZk3QZBduvhwvu1Sp8dlv17I/CDDvv5GvGEherEpF+XF95XNflfB/wme78p1YnNmwrvV4TiIERObx8iZzi/sHwmMQvSccRQ1ncRcWaDuM5NrmnuYuCqms8vLbx/Tumzxwrvt21wXlpJDTvBKuZARgvvt6D1JL+WmMyi7rUuURSAmNOwFxsC/0IEct5D/MiLOY1i4vrMmv0UE6AjEp9vQishu5eYKWhF8QTwEaKe6RDgS8QEt8sK60wm6g7PB/6T+pCUQV1TGJu4pdxZeF9++F1LtC5D5LC+TlQxDLOOViugfouEeUXsKLBLYfmetBdNmr6uKx2jSZHwrUT8VNNjnFnznZ5G68ZcQHsXpA8V9nNixT4mokhYZ9XsPD5Ne4vtcRXbDOKaFouEVcfJ7VZY9/jE5/sTYQzFY84nZh4/nvidaCU3zBzWaoydpmte4f2afey320riA4gWpFlEfc2pRB3TXkRs1ObZa+vCNnXX5VFitiCI73hQ4bO8BS63ohQHO3mcqMf6ANGa9qPCZx+kvRJ70NcUotK8H+cRD8XvZecE0br8ciIh/mP22rvP42gF1k8O62WFbecxtmixT+GzE/o8x045rDzCexGwTc1+1i3s51sdjrlXYd0LC8t3Lyz/35rtu8lhHVVYd1g5rLLZjM09lVtwB3VNU4GjVTrlsIpmZPv+FHAFUeTNt13O2IeMViLDzGEVcxoXM7YOqzgPYfEpPGhPp3VDnUM8YaukmtOrXECEWEBUWG+WvS9Wtp9es/2SwvtOuc1ySMR4eJio28oVwwCGdU0HaTFRd/jPRK5rQ+CU7LPJwGdY+buLPSUNK8HaFvi7wv+/XPr8OqIzMEQFbz9FxDrFImlqstaibvrXjRAtlxA//MOJ4lH+5H6c+kDJ4ugHnWKCdu3w+bAUK6wXFd4P65oO031EaEzewrsxsNHEnY56NYwE61lE7NG07P9X0j4O1AitSthZRMvVMBSbu+v6ta0HvKvLfX+NVq7xcCKxyjtFn0PUdVW5tvD+xTXrPZ/W0DT9KocC1NmSGGYmV2zoGOY1HbZitcYg+lNqBdNNHdZsotvEI4ytu6oaXmYD4MHCuh+mvhl6AyKGaLvS8ro6rMlETm6UiONK5VbWAi4r7KNJHVauGIh5d+F9pximqYX1lxH1fWVb0IoUH0Qd1kPAj4kK82k1621HdG3Jj1kONxjkNR1UHdbeRA6qbrDBrWn9NudhyMNKqZs/2izg/aVl+QB+2xBP5OKNcCvRD7Cqv9092efnEpWkHyXqgH5A5EAWED/8zYlI5jnEzXJ+F+c8QtRd5InhhUTx9EqiHml74M1EPdEZRE6pG1+lVWm+QfbvbXTu77iM6GN3EvGk/xkRyX11dp47EVHnk4iYojd2eV4pk4jI8/2I5v4ricrzB7Njbkgk/rvQynkvoD2XNOxr2otnEMP3nEQEvf6G6OazhPiN7kyrTypEVP+y9t1oZdfLEMkPEPFHTceM2okYSqTJvufTHsncqZVwFaLJu26/ZxHxVd3msIp9BvNXXR/DoqmMHbKm/FpIFDMHFYf1fVpDzDR5zaXVmbhsUNd0UDmsIxp+p+XE8N3DDpjWBKlLsBYTI4reSATnnUDvk1BMISKvz8z2N594As4jntynEjmOmYltmwSOTibGsLqIaAFbQuSEzqHVj3EG9TdXldMK240QdXhNTSZylRcSOZ3FRDHwFFr1Q4MMHJ1FFAm/SIRd3JcdcwnxoLmK+D770zn3PYhrOqgEaxLxIDuGSJj/QATAjhBF4auJ8bnqQjCkcfFCWj/kD07wuUgaoidD1njtwvuHJuwsJA3dkyHBKrbIza1cS5ImyLZEy9nJtAZ2uxubqiWtgIqD/+WxTAdP6BlJGrqVuUiYBwCeS3TvmagJSiVJkp78ipOX5q9hTF8vPZUN4z47MLHPBcUVOlVSv5Sx4z0VLSYipx8lggbvJFrp5hLDydzQ61mvZL5HTM5ZtIAYAvqx9tWTLqO9T94dxLjx5anRJsr6wKFE8XsbIqh4VSLgNX/dTEzPdRXwe8YOo6N6dfda0SPE6Bk3AtcQgy02mSfzKeGldN81J39dTPXUXcM03jmsv00cb5Sxw+vUeRaRKJW3T829N1H+iWYTpxZf85N7UpV+7rVL6Dxm/qBNSA5rmJXuLyaG3T1xyMeZaD9l7PDPuUMbbv8G0oPJndHzGQ3WJ4gB71Ldour0Ot+hurcb0eG+27/RSmfYcUuTiCFn1mD85os7G/hzadkDqRUHZCnRT+4fS8v3JkYsSCVmRamE7UpiiJeJth2dhyPWcM2jlcuYThTNU2N5bQG8jZjp6CmrKpv6RSLu6WCiA+wniHGT6rKt/zDO5z6eXkD6Ox81pO3Gy2dJj3hwKtFxeRtiGOSdic7rJxIdjZcT9Ztqrupee2tpvRnAxyrWHc8p5SakSNhJ04uY24kYnbKqTmOdDsebTgwVciaRS3qYCAq9jxhd4OPEvH91ml7I1YFXEfPqfYe40W4h+iOOEo0JdxA/gg81OO7cxHE7zbWXShCWMLZ/5LcS61TNxvOOxLrXdziHOhcl9veJBtttBLyv5vNBX/u6v/kqxHW5hMit5KNKnEbkSupMJRLibxJjtD1E1DcuyPZxdfbZccTY/v0Uybq9125LrFs3vn5uZrbPs4iK+0eJe+x+ohL/88R36aTbBGsS0TvlV9mxFhNj5p1Kawq2cU+wIFqPrq/Yru7HfiBjR+2sei0hKqSrhrhteiH3TaxX91qanX9Vfdz7EtuMUD3i6pSK73tOab2JTLDy2XGKr3KLaC8Gfe2r/uabE62VVftdRPW0X5uQ/v51r0O6uwxjdHuv/SWx7mUdjnEokWg3+S6XUj9UUjcJ1hpEHVvVsRYTpYoJqXR/hOr6qgMqlr+HuFE3qPi8aBoxf953Gd/K/KlEjqCq9e5M2ufWm0RUqqfsQfr7NqlsH22wziA8nFh2DDHC53jqdO1TNiAafeqmrp9J5JDKMxNNJupCV8Txs6YTiUUq13l1zXb/Soxq26mUk3sREZ5SHpK8W1OI0IvUMOC56US/4DfVrAMMr9L9IqJIt2Vp+XOJWVfuKyx7FVH3UW4pe4gYDvl+Ytjd8mQNryb+cB/r81xHiGLsn7JjLSBGytyEdDb/OGIS0VtKy+8isrvlJ/ahpAcWTFW2P0D7hB0p45VgXU57aMpuRFb+ciJ05XfAb4knfrcGde1TqnK2ZWsDRzJ2fsw5RP1i0VLgl8QAi0uJ4bu3IhLEYbbOfYp4QEMUb9cn3QK7kCjOpbyWSLBS7qE198Ks0mezia5vz6P3MJV3U13EfJA472cSCVtVhqaxXoqEuS9XbFscdncKYyc8yF8XET+IoiMT6y0kZmcpappV3Q54O/VPnHVIFws+XLH+oYl1R4EdS+vNpH1o5VHiKVOWKhKeVnH8QRcJN6b5dPR3E+PP70/nnO+gr33qb56/TiJuiBlEbNxjiXXKgZdvT6zz5orznEbckKfQ37Rm/cRh3UF1DmYqUVdV3uaR0vnOBP6rYv+pxK7JfbYK6WqPhUSGI8+kbECEB6WOPfQ6rNwnK7bdr8P+l1JdNLwwsX45nGDQrRfvTezvpxXrViVEnyut9/rEOqOkx1BPJVhfqjj+oBMsiASoaaKVv65lMPMpNr32VQnWFxLrpm7KctjLuxLrVCVYg9JrgjVCTKpRNeHuyyq2SxW/JhF1V+V1U7nnJvfZnhXHfmdif6uRTtzGLXC0ambd0cL7PRKf30wUHfdKvFIjitaVjZt4CZGgXExkjxcw9oKdmNimqg7nMaKrTtkhjG0kOCyxzvVEt5YmxrO7znlE8egc2uvoqmxNPFw6/W0Gee3LRoFPJ5b/JrFsTcb+XstxfBC52suInNRRRNF4tYbnMkyTiKLy9bTn5CF9jy0mPcb+KK0Jgos2obu5CnJzEsuWk66nXUi0GNcaZuDo+hXLi0+zjROfb0l3U3l1avKush7xR0v9QTupm6n6DNqfxusTT5tfEEWdfSq2a2q08yoD9WeiHmR94JVEQvRC6qein0Y0WT+H9oRuWNe+6AGiqFS2KLFsSvbKp/66mKirKn6/yUSusZhzHCH6zP6EKM73Uo/XydtoVQFMIkofexKz/xRLImsTD5XnMPY7pma4vpPqfp43VSzfiGZ1h0WpWc3vJf03qDv2Xw0zh/WixLJRIn4kVzfxZVPluq4mpgI/p7cbBuqv28WM/Y65vJL9dbRXmo4QLThNVU2EOuyuGfcSdZOHETFM6xG5x++SzvVtQcxeXTTMa190Z8XyxQ22XUrUsdza4Fy2IvpaXkv/sxp1MkqrrjDVaLMR7aEVqXusrvfF/RXLn9bx7NqlcqBV+4fOvUKGlmDtSXoa82sZe8J107k31cuU469l7FTsuV8ArwF2IFpNNqe6gr3KCPGDKns1kaCkfmgXUH2DpcyoWJ56mg7TPCIA8XXA31esU24pHua1L6p6ij/RcPu5RNXEW4gEuVPuaSbwFdpb2oblItLfsVwsTLXulRuqmnzWy726sMtjV9XD/dUwioRrEV13Un5Y+v/tiXWuIF32HaRU3co1RINAufjSSz3F12mfcmx1IoYp9d3qioNLE8uqJqndofOpdWUdmvfDPLdiefk3NuxrP0iPE0G6eaDuOkQCvCUR7vFGxj70182WVzXKDFJe4V5WriJJ3WN5q2kqt1kV/Z/aTyeph/D6xN81lZh16nkw8BzWLkTFZOrAC4jJLItS4//sRPOcwqb09qNOpeRzab9hptFbNv8GoitR2Udob4xYSHt0e9EjiWVzaM9Z7k57rFq/TiZiyw6g8wS5VUW8chFg2Nd+mB4gft9fIVrZUhXXvdapdmtH0g+u8hhsFyTWmU56+KNJRNe4sr/QuXicckVi2RTg8MTy1Yiceq1eE6wX0Or8fCQR3HYFcZNuVbHNB2h/Wl9KxIgUTSGijFNFSohB4w4ksuk30TxytyiVTd6DCJTLTSMC8bbuYf+QzjWlAv7Oprr4AhFYWbY2EdqwCZEAHE7MeFzVMtuPPYAfEMG+3waOJYJjt6fVmvtZ0t2FltP+ox2Pa9+vHYiK9IOprmedQXtxF5oP2tirqUQutarOs/x7Sd1jEJmHYojRTOIBlQpHqeoK1snFRJ1b2YnEtc3Tn42I+6Cqoa6xfoLZiq+qIiLE0zs1gN1yIgd2GnFDnE78+B8vrbdpaX9N4kPeUnGe92bHO410sF3+SrU+lc0mstydrk2nyufNiGvR67XvJw4rFQPWzSs1Mcgwrn03sXd7Vey3WHTdsbD8CaLI+k0ihusk4ga+vWI/qUSsiap77X4i1OdmojHniYr1RolWzucm9v1q0vfYKBFO8nuqY+1uI51oN73mx9acb97Jve73PZDA0aav5UQsTKec3PFUX9BOr14SrFWJLG6T809F4DZJsCBu2Lr930azXO63G55ranSFiUqw7iZdPBrGtR9mgtXNq2McUY1BZA5ScWe5D/ewv4eo7kvY9JpPIfp0NjneJYll4xY4+muiXuUDdA50PIEo5nXTUjZK9GfrKgXOPE4MbXxXzTqLiRiYckNBNzrFVn2DZkGgRxN99qrMJ0INUnUq/fg+EWg52uV2lxPFllR4x3hd+/F2FsOPhq+yiLjP/rlmnY8RHfE7hg5kLiGqfn7f36mxnPh7141Xv4wYRugznXbWTythPgnFfCII7Q4ibGEukVilys11fkQ8UV9DBFbuRJRp86LVAiJw7TqiXH4B6adtqnI41dL2R+LpcSyRWG5G6wl+PtGt40/0N1Lqz4gsfVVTbtNg0QeIuLajgYOIesKpRILwY6K+5/Y+zzXlO9nrGURU+q7ZsbcgigmziZtlIa1JEc6m9aSsMh7Xvh9XETn3XbLX9sTfcC2i/nAZ8bu/iai3PSvbZjwsI+6Fe4l74QKid0VdfFPuW0R95BuAlxN1desRoRgPEg+RS7P9DXIehPlEqNOhRGPFNkRc1z1EQnYKMdLEgQM85krjVNqzlWdP6BlJGogn2+QQ00n3mJ873iciafCGPQnFeHk/0a/qFaRjuM4b39ORpGp1LQ8/nsDzkqQ2VYnVVTTonyRJ46mYSM0j4pGOpnN3EkmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSVO//AQJmuZYvcPeHAAAAAElFTkSuQmCC');
    })
  });
});
